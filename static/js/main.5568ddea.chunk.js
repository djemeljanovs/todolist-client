(this["webpackJsonptodolist-client"]=this["webpackJsonptodolist-client"]||[]).push([[0],{50:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var r,i=n(0),o=n.n(i),c=n(41),a=n.n(c),u=(n(50),n(2)),s=n(10),d=n(3),l=n(44),b=n(15),j=n(43),f=n.n(j),O=n(1);!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONNECTED=1]="CONNECTED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.ERROR=3]="ERROR"}(r||(r={}));var m={userId:"",status:r.INITIALIZING,createItem:function(){return{}},focusItem:function(){return{}},blurItem:function(){return{}},updateItem:function(){return{}},removeItem:function(){return{}},items:[]},h=o.a.createContext(m);function I(){var e=o.a.useContext(h);if(!e)throw new Error("useApi must be used within ApiProvider");return e}var C,g,E,p=f()("https://ubiquity-todolist-server.herokuapp.com/");function v(e){var t=e.children,n=Object(i.useState)(r.INITIALIZING),o=Object(b.a)(n,2),c=o[0],a=o[1],u=Object(i.useState)([]),s=Object(b.a)(u,2),d=s[0],j=s[1];Object(i.useEffect)((function(){p.on("connect",(function(){a(r.CONNECTED)})),p.on("connect_error",(function(e){a(r.ERROR)})),p.on("disconnect",(function(){a(r.DISCONNECTED)})),p.on(C.LIST,(function(e){j(e)})),p.on(C.CREATE,(function(e){j((function(t){return t.concat(e)}))})),p.on(C.UPDATE,(function(e){console.log("update received: "+JSON.stringify(e)),j((function(t){var n=Object(l.a)(t),r=t.findIndex((function(t){return t._id===e._id}));return r>-1?n[r]=e:n.push(e),n}))})),p.on(C.REMOVE,(function(e){j((function(t){return t.filter((function(t){return t._id!==e._id}))}))}))}),[]);var f,m=Object(i.useCallback)((function(e,t){p.emit(e,{id:t})}),[]),I=Object(i.useCallback)((function(){p.emit(C.CREATE)}),[]),g=Object(i.useCallback)((function(e,t){p.emit(C.UPDATE,{id:e,text:t})}),[]);return Object(O.jsx)(h.Provider,{value:{userId:p.id,status:c,createItem:I,updateItem:g,focusItem:(f=C.FOCUS,function(e){return m(f,e)}),blurItem:function(e){return m(C.BLUR,e)},removeItem:function(e){return m(C.REMOVE,e)},items:d},children:t})}!function(e){e.LIST="item/list",e.CREATE="item/create",e.FOCUS="item/focus",e.BLUR="item/blur",e.UPDATE="item/update",e.REMOVE="item/remove"}(C||(C={}));var x=Object(s.a)({status:{display:"flex",flexDirection:"row",alignItems:"center"},icon:{height:20,width:20,borderRadius:"50%",background:function(e){return e.color},marginRight:5}}),N=(g={},Object(d.a)(g,r.INITIALIZING,"yellow"),Object(d.a)(g,r.CONNECTED,"green"),Object(d.a)(g,r.DISCONNECTED,"black"),Object(d.a)(g,r.ERROR,"red"),g),T=(E={},Object(d.a)(E,r.INITIALIZING,"Connecting"),Object(d.a)(E,r.CONNECTED,"Connected"),Object(d.a)(E,r.DISCONNECTED,"Disconnected"),Object(d.a)(E,r.ERROR,"Connection Error"),E);function R(){var e=I().status,t=x({color:N[e]});return Object(O.jsxs)("div",{className:t.status,children:[Object(O.jsx)("div",{className:t.icon}),Object(O.jsx)("h4",{children:T[e].toUpperCase()})]})}var w=Object(s.a)({button:{display:"flex",alignItems:"center",color:"white",padding:20,background:function(e){return e.disabled?"grey":"#5071FD"},border:"none",fontSize:24,fontWeight:"bold",width:"fit-content",borderRadius:10,textTransform:"uppercase",userSelect:"none",cursor:"pointer"}});function y(e){var t=w(e);return Object(O.jsx)("button",Object(u.a)(Object(u.a)({className:t.button},e),{},{children:e.children}))}function D(e){return Object(O.jsx)("svg",Object(u.a)(Object(u.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 28 28"},e),{},{children:Object(O.jsx)("path",{fill:e.color,d:"M28 22.398L19.594 14 28 5.602 22.398 0 14 8.402 5.598 0 0 5.602 8.398 14 0 22.398 5.598 28 14 19.598 22.398 28z"})}))}var S=n(45),L=Object(s.a)({root:{width:"100%",position:"relative",marginRight:10,minWidth:0},badge:{position:"absolute",top:-25,left:10,color:"white",zIndex:100,borderTopLeftRadius:5,borderTopRightRadius:5,padding:5,background:function(e){return e.isControlledByCurrentUser?"#5071FD":"grey"}},input:{height:70,width:"100%",boxSizing:"border-box",border:"3px solid lightgrey",borderRadius:10,fontSize:26,background:"none",paddingLeft:10,"&:focus":{border:"3px solid #5071FD"},"&:disabled":{background:"#EEEEEE",border:"3px solid grey"}}});function A(e){var t=e.isControlled,n=e.isControlledByCurrentUser,r=Object(S.a)(e,["isControlled","isControlledByCurrentUser"]),o=L({isControlled:t,isControlledByCurrentUser:n}),c=Object(i.useState)(r.value),a=Object(b.a)(c,2),s=a[0],d=a[1];return Object(i.useEffect)((function(){d(r.value)}),[r.value]),Object(O.jsxs)("div",{className:o.root,children:[t&&Object(O.jsx)("div",{className:o.badge,children:n?"You are editing":"Someone else is typing"}),Object(O.jsx)("input",Object(u.a)(Object(u.a)({maxLength:30,type:"text",className:o.input,placeholder:"Empty item"},r),{},{value:s,onChange:function(e){r.onChange&&r.onChange(e),d(e.target.value)}}))]})}var B=function(e,t){var n;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var c;return n&&clearTimeout(n),n=setTimeout((function(){c=e.apply(void 0,i)}),t),c}},k=Object(s.a)({root:{display:"flex",width:"100%"}});function U(e){var t=I(),n=t.userId,r=t.removeItem,i=t.focusItem,o=t.blurItem,c=t.updateItem,a=null!=e.controlledBy,u=a&&e.controlledBy!==n,s=a&&e.controlledBy===n,d=k(e);return Object(O.jsxs)("div",{className:d.root,children:[Object(O.jsx)(A,{disabled:u,value:e.text,onChange:B((function(t){c(e._id,t.target.value)}),1e3),onFocus:function(){i(e._id)},onBlur:function(){o(e._id)},isControlled:a,isControlledByCurrentUser:s}),Object(O.jsx)(y,{onClick:function(){r(e._id)},disabled:u,tabIndex:-1,children:Object(O.jsx)(D,{width:30,height:30,color:"white"})})]})}var F=Object(s.a)({wrapper:{width:"100%",maxWidth:600,margin:"0 auto",padding:15},item:{marginBottom:15}});function _(){var e=F(),t=I(),n=t.status,i=t.items,o=t.createItem;return Object(O.jsxs)("div",{className:e.wrapper,children:[Object(O.jsx)("h2",{children:"Multiplayer todo list \ud83d\uddd2\ufe0f"}),Object(O.jsx)(R,{}),Object(O.jsx)(O.Fragment,{children:i.map((function(t,n){return Object(O.jsx)("div",{className:e.item,children:Object(O.jsx)(U,Object(u.a)({},t))},"item-".concat(n))}))}),Object(O.jsx)(y,{disabled:n!==r.CONNECTED,onClick:o,children:"New item"})]})}var P=function(){return Object(O.jsx)(v,{children:Object(O.jsx)(_,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,89)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))};a.a.render(Object(O.jsx)(o.a.StrictMode,{children:Object(O.jsx)(P,{})}),document.getElementById("root")),G()}},[[88,1,2]]]);
//# sourceMappingURL=main.5568ddea.chunk.js.map